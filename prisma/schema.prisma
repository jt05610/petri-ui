datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id    String @id @default(cuid())
  email String @unique

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  password Password?
  nets     Net[]
}

model Password {
  hash String

  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId String @unique
}

model Net {
  id          String       @id @default(uuid())
  name        String
  description String
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  author      User         @relation(fields: [authorID], references: [id])
  authorID    String
  places      Place[]
  transitions Transition[]
  arcs        Arc[]
}

model Place {
  id    String @id @default(uuid())
  net   Net    @relation(fields: [netID], references: [id])
  netID String
  name  String
  arcs  Arc[]
  bound Int
}

model Transition {
  id    String @id @default(uuid())
  net   Net    @relation(fields: [netID], references: [id])
  netID String
  name  String
  arcs  Arc[]
}

model Arc {
  id           String     @id @default(uuid())
  net          Net        @relation(fields: [netID], references: [id])
  netID        String
  fromPlace    Boolean
  place        Place      @relation(fields: [placeID], references: [id])
  placeID      String
  transition   Transition @relation(fields: [transitionID], references: [id])
  transitionID String
}
